- addMavenRepository: 'https://store.jahia.com/nexus/content/repositories/jahia-public-app-store@id=JahiaStore'
- addMavenRepository: 'https://devtools.jahia.com/nexus/content/groups/public/@snapshots@noreleases@id=JahiaSnapshot'

- addMavenRepository: 'https://devtools.jahia.com/nexus/content/groups/internal/@id=jahia-internal@snapshots'
  username: "NEXUS_USERNAME"
  password: "NEXUS_PASSWORD"
  
# replace URL by staging repository on Nexus
- addMavenRepository: "https://devtools.jahia.com/nexus/content/repositories/jahia_staging_releases-2857"
  username: "NEXUS_USERNAME"
  password: "NEXUS_PASSWORD"

# This modules were added during the switch from using jahia-discovery to jahia-ee
- installBundle:
  - 'mvn:org.jahia.modules/legacy-default-components'
  - 'mvn:org.jahia.modules/press/'
  - 'mvn:org.jahia.modules/person'
  - 'mvn:org.jahia.modules/news'
  - 'mvn:org.jahia.modules/font-awesome'
  - 'mvn:org.jahia.modules/calendar'
  - 'mvn:org.jahia.modules/bootstrap3-core'
  - 'mvn:org.jahia.modules/bootstrap3-components'
  - 'mvn:org.jahia.modules/location'
  - 'mvn:org.jahia.modules/topstories'
  - 'mvn:org.jahia.modules/rating'
  - 'mvn:org.jahia.modules/event'
  - 'mvn:org.jahia.modules/bookmarks'
  - 'mvn:org.jahia.modules/dx-base-demo-core'
  - 'mvn:org.jahia.modules/dx-base-demo-templates'
  - 'mvn:org.jahia.modules/dx-base-demo-components'
  - 'mvn:org.jahia.modules/skins'
  - 'mvn:org.jahia.modules/default-skins'
  - 'mvn:org.jahia.modules/grid'
  - 'mvn:org.jahia.modules/tabularList'
  autoStart: true
  uninstallPreviousVersion: true

# uninstall only if it exists, otherwise it throws an error
# need to hardcode version for uninstall
- if: org.jahia.osgi.BundleUtils.getBundleBySymbolicName('content-editor',null) != null
  do:
    - uninstallBundle: 'mvn:org.jahia.modules/content-editor/3.6.0'

- installBundle:
  - 'mvn:org.jahia.modules/graphql-dxm-provider'
  - 'mvn:org.jahia.modules/jcontent'
  - 'mvn:org.jahia.modules/site-settings-seo'
  - 'mvn:org.jahia.modules/copy-to-other-languages/3.2.0'
  autoStart: true
  uninstallPreviousVersion: true
